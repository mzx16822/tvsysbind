(function(h){h.tvSysBtnBind=function(d){var a=this,u=self,v=d.keyRemoveDefault?!0:!1,f=d.currentIndex?d.currentIndex:0,w=d.btnLeft?d.btnLeft:37,x=d.btnUp?d.btnUp:38,y=d.btnRight?d.btnRight:39,z=d.btnDown?d.btnDown:40,A=d.btnEnter?d.btnEnter:13,k=d.currentClass?d.currentClass:"current",g=document.getElementById(d.id?d.id:""),r=d.effect?d.effect:"slide",e=[];a.className=d.className?d.className:"hotbutton";this.event={};var l=0,m=0,n=0,p=0,t=d.eleIds?d.eleIds:!1,q=0;this.defaultIndex=f=parseInt(f);"function"==typeof d.onEnterPress?d.onEnterPress:d.onEnterPress=function(){};"function"==typeof d.onPress?d.onPress:d.onPress=function(){};"function"==typeof d.onLoad?d.onLoad:d.onLoad=function(){};this.onLoad=function(){a.reLoad();a.prev=e[f];a.prevIndex=f;a.current=e[f];a.currentIndex=f;a.target=g;d.onLoad.call(a)};this.reSetClass=function(b){a.currentIndex=0;a.prevIndex=0;a.current.classList.remove(k);a.className=b;a.reLoad()};this.reLoad=function(){if("undefined"==typeof e[f]){var b=document.createElement("span");b.setAttribute("class",a.className+" hide");g.appendChild(b)}else g.getElementsByClassName("hide")[0]&&g.removeChild(g.getElementsByClassName("hide")[0]);if(null!=g)this.hotbtn=e=g.getElementsByClassName(a.className);else for(b=0;b<t.length;b++)e.push(document.getElementById(t[b]));if(0>=e.length)return!1;a.currentIndex=a.currentIndex?a.currentIndex:d.currentIndex;a.prev=e[f];a.prevIndex=f;self.rule();self.classDo(a.currentIndex);for(b=0;b<this.hotbtn.length;b++)this.hotbtn[b].setAttribute("data-id",b)};this.hasClass=function(a,c){return a.className.match(new RegExp("(\\s|^)"+c+"(\\s|$)"))};this.addClass=function(b,c){a.hasClass(b,c)||(b.className+=" "+c)};this.removeClass=function(b,c){a.hasClass(b,c)&&(b.className=b.className.replace(new RegExp("(\\s|^)"+c+"(\\s|$)")," "))};this.toggleClass=function(b,c){a.hasClass(b,c)?a.removeClass(b,c):a.addClass(b,c)};this.setCurrentIndex=function(b){b=parseInt(b);a.currentIndex=b;e[b]&&(a.current=e[b],self.classDo(b))};this.viewScrollY=function(a,c){if("slide"==r){clearInterval(p);var b=a.scrollTop;n=0;p=setInterval(function(){n++;0<c?(a.scrollTop+=n,a.scrollTop>=b+c&&clearInterval(p)):(a.scrollTop-=n,a.scrollTop<b+c&&clearInterval(p))},10)}else a.scrollTop+=c};this.viewScrollX=function(a,c){if("slide"==r){clearInterval(m);var b=a.scrollLeft;l=0;m=setInterval(function(){l++;0<c?(a.scrollLeft+=l,a.scrollLeft>=b+c&&clearInterval(m)):(a.scrollLeft-=l,a.scrollLeft<b+c&&clearInterval(m))},10)}else a.scrollLeft+=c};this.onEnterPress=function(){d.onEnterPress.call(a)};this.scroll=function(b){if(b=b?b:a.current.getAttribute("data-scroll")){b=document.getElementById(b);console.log();(a.current.getBoundingClientRect().top>b.clientHeight||0>a.current.getBoundingClientRect().top-b.clientHeight||a.current.getBoundingClientRect().bottom>b.clientHeight)&&a.viewScrollY(b,a.current.getBoundingClientRect().bottom-b.clientHeight);console.log(b.getBoundingClientRect().height+" scrollTop:"+b.scrollTop+" = bottom :"+a.current.getBoundingClientRect().bottom+" = offsetTop:"+a.current.offsetTop);if("x"==b.getAttribute("data-scroll-direction")){for(var c=b.children[0].children,d=0,e=0;e<c.length;e++)d+=1.08*c[e].clientWidth;b.children[0].setAttribute("style","width:"+d+"px")}(0<b.scrollLeft||0>a.current.getBoundingClientRect().left-b.getBoundingClientRect().width||a.current.getBoundingClientRect().right>b.getBoundingClientRect().width)&&a.viewScrollX(b,a.current.getBoundingClientRect().right-b.getBoundingClientRect().width)}var f=setInterval(function(){q++;0>a.current.getBoundingClientRect().top?h.scrollTo(0,document.body.scrollTop-q):a.current.getBoundingClientRect().top+a.current.clientHeight>document.body.clientHeight?h.scrollTo(0,document.body.scrollTop+q):(q=0,clearInterval(f))},10)};this.onPress=function(b){a.scroll();d.onPress.call(a)};self.classDo=function(b){try{e[b].classList.add(k);for(var c=0;c<e.length;c++)c!=b&&e[c].classList.remove(k)}catch(B){for(a.addClass(e[b],k),c=0;c<e.length;c++)c!=b&&a.removeClass(e[c],k)}};self.EventUtil={add:function(a,c){"null"==typeof a.onkeypress?a.onkeypress=function(a){c&&c(a)}:a.onkeydown=function(a){c&&c(a)}}};EventUtil.add(document,function(a){u.EventUtil(a)});self.rule=function(){if(0>a.currentIndex||a.currentIndex>e.length-1)a.currentIndex=e.length-1;var b=e[a.currentIndex].parentNode.parentNode.parentNode.getAttribute("data-num")||e[a.currentIndex].parentNode.parentNode.getAttribute("data-num")||e[a.currentIndex].parentNode.getAttribute("data-num")||e[a.currentIndex].parentNode.children.length;if(a.event.keyCode==w)b=e[a.currentIndex].getAttribute("data-left"),a.currentIndex=b?a.currentIndex-=Math.abs(b):--a.currentIndex;else if(a.event.keyCode==y)b=e[a.currentIndex].getAttribute("data-right"),a.currentIndex=b?a.currentIndex+=Math.abs(b):a.currentIndex+=1;else if(a.event.keyCode==x){var c=e[a.currentIndex].getAttribute("data-up");a.currentIndex=c?a.currentIndex-=Math.abs(c):a.currentIndex-=parseInt(b)}else a.event.keyCode==z&&(c=e[a.currentIndex].getAttribute("data-dow"),a.currentIndex=c?a.currentIndex+=Math.abs(c):a.currentIndex+=parseInt(b));if(0>a.currentIndex||a.currentIndex>e.length-1)a.currentIndex=e.length-1;self.classDo(a.currentIndex)};self.EventUtil=function(b){a.event=b;a.prev=e[a.currentIndex];a.prevIndex=a.currentIndex;self.rule();a.current=e[a.currentIndex];a.currentIndex=a.currentIndex;v&&(h.event?h.event.returnValue=!1:b.preventDefault());self.classDo(a.currentIndex);a.onPress.call(a);b.keyCode==A&&a.onEnterPress.call(a)};this.onLoad()}})(window);